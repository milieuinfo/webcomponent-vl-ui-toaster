<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script src="../../node_modules/@webcomponents/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../node_modules/web-component-tester/browser.js"></script>
  
  <script type="module" src="../../src/vl-toaster.js"></script>
  <script type="module" src="../../node_modules/vl-ui-alert/dist/vl-alert.js"></script>
</head>

<body>
  <test-fixture id="vl-toaster-fixture">
    <template>
      <div is="vl-toaster"></div>
    </template>
  </test-fixture>

  <test-fixture id="vl-toaster-top-left-fixture">
    <template>
      <div is="vl-toaster" data-vl-top-left></div>
    </template>
  </test-fixture>

  <test-fixture id="vl-toaster-top-right-fixture">
    <template>
      <div is="vl-toaster" data-vl-top-right></div>
    </template>
  </test-fixture>

  <test-fixture id="vl-toaster-bottom-left-fixture">
    <template>
      <div is="vl-toaster" data-vl-bottom-left></div>
    </template>
  </test-fixture>

  <test-fixture id="vl-toaster-bottom-right-fixture">
    <template>
      <div is="vl-toaster" data-vl-bottom-right></div>
    </template>
  </test-fixture>

  <test-fixture id="vl-toaster-fadeout-fixture">
    <template>
      <div is="vl-toaster" data-vl-fadeout></div>
    </template>
  </test-fixture>

  <script>
    suite('vl-toaster', () => {
      setup((done) => {
        customElements.whenDefined('vl-toaster').then(done);
      });

      test('heeft de klass vl-toaster class', () => {
        const element = fixture('vl-toaster-fixture');
        assert.isTrue(element.classList.contains('vl-toaster'));
      });

      test('heeft de klass vl-toaster--top-left class', () => {
        const element = fixture('vl-toaster-top-left-fixture');
        assert.isTrue(element.classList.contains('vl-toaster--top-left'));
      });

      test('heeft de klass vl-toaster--top-right class', () => {
        const element = fixture('vl-toaster-top-right-fixture');
        assert.isTrue(element.classList.contains('vl-toaster--top-right'));
      });

      test('heeft de klass vl-toaster--bottom-left class', () => {
        const element = fixture('vl-toaster-bottom-left-fixture');
        assert.isTrue(element.classList.contains('vl-toaster--bottom-left'));
      });

      test('heeft de klass vl-toaster--bottom-right class', () => {
        const element = fixture('vl-toaster-bottom-right-fixture');
        assert.isTrue(element.classList.contains('vl-toaster--bottom-right'));
      });

      test('bij fadeout mode verdwijnt alert automatisch na (ongeveer) 5 seconden', (done) => {
        const element = fixture('vl-toaster-fadeout-fixture');
        element.push(document.createElement('vl-alert'));
        setTimeout(() => {
          assert.equal(element.childNodes.length, 1);
          // de alert verdwijnt automatisch na 5 seconden
          setTimeout(() => {
            assert.equal(element.childNodes.length, 0);
            done();
          }, 6000);
        });
      });
    });
  </script>
</body>
</html>
